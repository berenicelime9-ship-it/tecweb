<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Registro de Productos</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
    }

    h1, h2 {
      text-align: center;
    }

    form {
      width: 500px;
      margin: 0 auto;
    }

    fieldset {
      padding: 20px;
      border-radius: 10px;
    }

    ul {
      list-style-type: none;
      padding: 0;
    }

    li {
      margin-bottom: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    label {
      width: 150px;
      text-align: right;
      margin-right: 10px;
    }

    input[type="text"],
    input[type="number"],
    select,
    textarea {
      width: 300px;
      padding: 5px;
    }

    textarea {
      resize: none;
      height: 60px;
    }

    p {
      text-align: center;
      margin-top: 20px;
    }

    input[type="submit"],
    input[type="reset"] {
      padding: 8px 20px;
      margin: 5px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <h1>Registro de Productos &ldquo;Automóviles&rdquo;</h1>
  <form id="formularioAutos" action="http://localhost:8080/tecweb/practicas/p09/set_producto_v2.php" method="post">
    <h2>Datos del auto:</h2>

    <fieldset>
      <legend>Información del Automóvil</legend>
      <ul>
        <li>
          <label for="form-name">Nombre:</label>
          <input type="text" name="name" id="form-name" required maxlength="100">
        </li>

        <li>
          <label for="form-brand">Marca:</label>
          <select name="brand" id="form-brand" required>
            <option value="">-- Selecciona una marca --</option>
            <option value="Toyota">Toyota</option>
            <option value="Ford">Ford</option>
            <option value="Nissan">Nissan</option>
            <option value="Chevrolet">Chevrolet</option>
            <option value="Volkswagen">Volkswagen</option>
            <option value="Honda">Honda</option>
            <option value="BMW">BMW</option>
            <option value="Mercedes-Benz">Mercedes-Benz</option>
            <option value="Hyundai">Hyundai</option>
            <option value="Kia">Kia</option>
            <option value="Mazda">Mazda</option>
            <option value="Audi">Audi</option>
            <option value="Peugeot">Peugeot</option>
            <option value="Renault">Renault</option>
            <option value="Tesla">Tesla</option>
          </select>
        </li>

        <li>
          <label for="form-model">Modelo:</label>
          <input type="text" name="model" id="form-model" required maxlength="25">
        </li>

        <li>
          <label for="form-price">Precio:</label>
          <input type="number" name="price" id="form-price" step="0.01" placeholder="Ej. 1000000.00" required>
        </li>

        <li>
          <label for="form-details">Detalles:</label>
          <textarea name="details" id="form-details" maxlength="250" placeholder="Escribe los detalles del automóvil..."></textarea>
        </li>

        <li>
          <label for="form-units">Unidades:</label>
          <input type="number" name="units" id="form-units" min="0" required>
        </li>

        <li>
          <label for="form-image">Imagen:</label>
          <input type="text" name="image" id="form-image" placeholder="Ruta o URL de la imagen">
        </li>
      </ul>
    </fieldset>

    <p>
      <input type="submit" value="Registrar">
      <input type="reset" value="Limpiar">
    </p>
  </form>

  <script>
    document.getElementById("formularioAutos").addEventListener("submit", function(event) {
      const nombre = document.getElementById("form-name").value.trim();
      const marca = document.getElementById("form-brand").value;
      const modelo = document.getElementById("form-model").value.trim();
      const precio = parseFloat(document.getElementById("form-price").value);
      const detalles = document.getElementById("form-details").value.trim();
      const unidades = parseInt(document.getElementById("form-units").value);
      const imagen = document.getElementById("form-image");

      if (nombre === "" || nombre.length > 100) {
        alert("El nombre es requerido y debe tener 100 caracteres o menos.");
        event.preventDefault();
        return;
      }

      if (marca === "") {
        alert("Debes seleccionar una marca.");
        event.preventDefault();
        return;
      }

      // Permite letras, números y espacios
      const regexModelo = /^[a-zA-Z0-9\s]+$/;
      if (modelo === "" || !regexModelo.test(modelo) || modelo.length > 25) {
        alert("El modelo es requerido, alfanumérico (puede incluir espacios) y debe tener 25 caracteres o menos.");
        event.preventDefault();
        return;
      }

      if (isNaN(precio) || precio <= 99.99) {
        alert("El precio debe ser mayor a 99.99.");
        event.preventDefault();
        return;
      }

      if (detalles.length > 250) {
        alert("Los detalles deben tener 250 caracteres o menos.");
        event.preventDefault();
        return;
      }

      if (isNaN(unidades) || unidades < 0) {
        alert("Las unidades deben ser un número mayor o igual a 0.");
        event.preventDefault();
        return;
      }

      if (imagen.value.trim() === "") {
        imagen.value = "img/default-car.png";
      }
    });
  </script>
</body>
</html>
